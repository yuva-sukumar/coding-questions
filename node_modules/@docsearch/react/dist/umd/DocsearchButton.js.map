{"version":3,"file":"DocsearchButton.js","sources":["../../../docsearch-core/dist/esm/useTheme.js","../../src/constants/keyboardShortcuts.ts","../../src/icons/SearchIcon.tsx","../../src/utils/keyboard.ts","../../src/DocSearchButton.tsx"],"sourcesContent":["import{useEffect as e}from\"react\";var t=function(t){var m=t.theme;e(function(){if(m){var e=document.documentElement.dataset.theme;if(m!==e)return document.documentElement.dataset.theme=m,function(){void 0===e?delete document.documentElement.dataset.theme:document.documentElement.dataset.theme=e}}},[m])};export{t as useTheme};\n","import type { KeyboardShortcuts } from '../types';\n\n/**\n * Default keyboard shortcuts configuration for DocSearch.\n * These values are used when no keyboardShortcuts prop is provided\n * or when specific shortcuts are not configured.\n */\nexport const DEFAULT_KEYBOARD_SHORTCUTS: Required<KeyboardShortcuts> = {\n  'Ctrl/Cmd+K': true,\n  '/': true,\n} as const;\n\n/**\n * Merges user-provided keyboard shortcuts with defaults.\n *\n * @param userShortcuts - Optional user configuration.\n * @returns Complete keyboard shortcuts configuration with defaults applied.\n */\nexport function getKeyboardShortcuts(userShortcuts?: KeyboardShortcuts): Required<KeyboardShortcuts> {\n  return {\n    ...DEFAULT_KEYBOARD_SHORTCUTS,\n    ...userShortcuts,\n  };\n}\n","import React, { type JSX } from 'react';\n\ninterface SearchIconProps {\n  size?: number;\n  color?: string;\n}\n\nexport function SearchIcon({ size = 20, color = 'currentColor' }: SearchIconProps): JSX.Element {\n  return (\n    <svg width={size} height={size} className=\"DocSearch-Search-Icon\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n      <circle cx=\"11\" cy=\"11\" r=\"8\" stroke={color} fill=\"none\" strokeWidth=\"1.4\" />\n      <path d=\"m21 21-4.3-4.3\" stroke={color} fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n    </svg>\n  );\n}\n","export const ACTION_KEY_DEFAULT = 'Ctrl';\nexport const ACTION_KEY_APPLE = '⌘';\n\nexport function isAppleDevice(): boolean {\n  return /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n}\n","import type { DocSearchModalShortcuts } from '@docsearch/core';\nimport { useTheme } from '@docsearch/core/useTheme';\nimport React, { useEffect, useState, type JSX } from 'react';\n\nimport { getKeyboardShortcuts } from './constants/keyboardShortcuts';\nimport { SearchIcon } from './icons/SearchIcon';\nimport type { DocSearchTheme } from './types';\nimport { ACTION_KEY_APPLE, ACTION_KEY_DEFAULT, isAppleDevice } from './utils';\n\nexport type ButtonTranslations = Partial<{\n  buttonText: string;\n  buttonAriaLabel: string;\n}>;\n\nexport type DocSearchButtonProps = React.ComponentProps<'button'> & {\n  theme?: DocSearchTheme;\n  translations?: ButtonTranslations;\n  keyboardShortcuts?: DocSearchModalShortcuts;\n};\n\nexport const DocSearchButton = React.forwardRef<HTMLButtonElement, DocSearchButtonProps>(\n  ({ translations = {}, keyboardShortcuts, ...props }, ref) => {\n    const { buttonText = 'Search', buttonAriaLabel = 'Search' } = translations;\n    const resolvedShortcuts = getKeyboardShortcuts(keyboardShortcuts);\n\n    const [key, setKey] = useState<typeof ACTION_KEY_APPLE | typeof ACTION_KEY_DEFAULT | null>(null);\n    useTheme({ theme: props.theme });\n    useEffect(() => {\n      if (typeof navigator !== 'undefined') {\n        isAppleDevice() ? setKey(ACTION_KEY_APPLE) : setKey(ACTION_KEY_DEFAULT);\n      }\n    }, []);\n\n    const [actionKeyReactsTo, actionKeyAltText, actionKeyLabel] =\n      key === ACTION_KEY_DEFAULT\n        ? ([ACTION_KEY_DEFAULT, 'Control', 'Ctrl'] as const)\n        : (['Meta', 'Meta', '⌘'] as const);\n\n    const isCtrlCmdKEnabled = resolvedShortcuts['Ctrl/Cmd+K'];\n    const shortcut = `${actionKeyAltText}+k`;\n\n    return (\n      <button\n        type=\"button\"\n        className=\"DocSearch DocSearch-Button\"\n        aria-label={isCtrlCmdKEnabled ? `${buttonAriaLabel} (${shortcut})` : buttonAriaLabel}\n        aria-keyshortcuts={isCtrlCmdKEnabled ? shortcut : undefined}\n        {...props}\n        ref={ref}\n      >\n        <span className=\"DocSearch-Button-Container\">\n          <SearchIcon />\n          <span className=\"DocSearch-Button-Placeholder\">{buttonText}</span>\n        </span>\n\n        <span className=\"DocSearch-Button-Keys\">\n          {key !== null && isCtrlCmdKEnabled && (\n            <>\n              <DocSearchButtonKey reactsToKey={actionKeyReactsTo}>{actionKeyLabel}</DocSearchButtonKey>\n              <DocSearchButtonKey reactsToKey=\"k\">K</DocSearchButtonKey>\n            </>\n          )}\n        </span>\n      </button>\n    );\n  },\n);\n\ntype DocSearchButtonKeyProps = {\n  reactsToKey?: string;\n};\n\nfunction DocSearchButtonKey({ reactsToKey, children }: React.PropsWithChildren<DocSearchButtonKeyProps>): JSX.Element {\n  const [isKeyDown, setIsKeyDown] = useState(false);\n\n  useEffect(() => {\n    if (!reactsToKey) {\n      return undefined;\n    }\n\n    function handleKeyDown(e: KeyboardEvent): void {\n      if (e.key === reactsToKey) {\n        setIsKeyDown(true);\n      }\n    }\n\n    function handleKeyUp(e: KeyboardEvent): void {\n      if (\n        e.key === reactsToKey ||\n        // keyup doesn't fire when Command is held down,\n        // workaround is to mark key as also released when Command is released\n        // See https://stackoverflow.com/a/73419500\n        e.key === 'Meta'\n      ) {\n        setIsKeyDown(false);\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return (): void => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [reactsToKey]);\n\n  return (\n    <kbd\n      className={\n        isKeyDown\n          ? 'DocSearch-Button-Key DocSearch-Button-Key--pressed'\n          : 'DocSearch-Button-Key' + (reactsToKey === 'Ctrl' ? ' DocSearch-Button-Key--ctrl' : '')\n      }\n    >\n      {children}\n    </kbd>\n  );\n}\n"],"names":["DEFAULT_KEYBOARD_SHORTCUTS","SearchIcon","_ref","_ref$size","size","undefined","_ref$color","color","React","createElement","width","height","className","viewBox","cx","cy","r","stroke","fill","strokeWidth","d","strokeLinecap","strokeLinejoin","ACTION_KEY_DEFAULT","DocSearchButton","forwardRef","ref","userShortcuts","t","m","_ref$translations","translations","keyboardShortcuts","props","_objectWithoutProperties","_excluded","_translations$buttonT","buttonText","_translations$buttonA","buttonAriaLabel","resolvedShortcuts","_objectSpread","_useState2","_slicedToArray","useState","key","setKey","theme","e","document","documentElement","dataset","useEffect","navigator","test","platform","_ref3","actionKeyReactsTo","actionKeyAltText","actionKeyLabel","isCtrlCmdKEnabled","shortcut","concat","_extends","type","Fragment","DocSearchButtonKey","reactsToKey","_ref4","children","_useState4","isKeyDown","setIsKeyDown","window","addEventListener","handleKeyDown","handleKeyUp","removeEventListener"],"mappings":"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"}